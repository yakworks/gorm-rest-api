
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <meta name="description" content="Utils and Rest Stuff">
      
      
        <link rel="canonical" href="http://9ci.github.io/gorm-rest-api/tutorial/stock/">
      
      
        <meta name="author" content="Joshua Burnett">
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-components-1.7.6">
    
    
      
        <title>Grails OOB(out of the box) - Gorm Rest Api</title>
      
    
    
      <script src="../../assets/javascripts/modernizr.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application.palette.css">
      
      <link rel="stylesheet" href="../../assets/stylesheets/material-components-web.min.css">
      <link rel="stylesheet" href="../../assets/stylesheets/mdc-web.css">
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    
  </head>
  
  
  
  
    <body data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="http://9ci.github.io/gorm-rest-api/" title="Gorm Rest Api" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tutorials
                </span>
              
            
            Grails OOB(out of the box)
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/9ci/gorm-rest-api" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      9ci/gorm-rest-api
    </div>
  </a>

          </div>
        </div>
      
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Gorm Rest Api
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/9ci/gorm-rest-api" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      9ci/gorm-rest-api
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../design-principles/" title="Design Principles" class="md-nav__link">
      Design Principles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api-docs-template/" title="Docs Template" class="md-nav__link">
      Docs Template
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../swagger-openapi/" title="OpenAPI - Swagger" class="md-nav__link">
      OpenAPI - Swagger
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Grails OOB(out of the box)
      </label>
    
    <a href="./" title="Grails OOB(out of the box)" class="md-nav__link md-nav__link--active">
      Grails OOB(out of the box)
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-api-with-grails-web-services" title="Creating an API with Grails Web Services" class="md-nav__link">
    Creating an API with Grails Web Services
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-gorm-domain" title="Creating a GORM domain" class="md-nav__link">
    Creating a GORM domain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-resource-annotation-to-our-domain" title="Adding the @Resource annotation to our domain" class="md-nav__link">
    Adding the @Resource annotation to our domain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-restfullcontroller" title="The RestfullController" class="md-nav__link">
    The RestfullController
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-endpoints-and-status-codes" title="Default Endpoints and Status Codes" class="md-nav__link">
    Default Endpoints and Status Codes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url-mappings" title="Url Mappings" class="md-nav__link">
    Url Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-list" title="===== GET (list):" class="md-nav__link">
    ===== GET (list):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id1emailamp109amp115amp99amp111amp116amp116amp48amp64amp97amp109amp101amp98amp108amp111amp46amp106amp112firstnamemarielastnamescottid2emailamp106amp114amp111amp100amp114amp105amp103amp117amp101amp122amp49amp64amp115amp99amp114amp105amp98amp100amp46amp99amp111amp109firstnamejosephlastnamerodriguez" title="[{"id":1,"email":"&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;","firstName":"Marie","lastName":"Scott"},{"id":2,"email":"&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;","firstName":"Joseph","lastName":"Rodriguez"}, ..." class="md-nav__link">
    [{"id":1,"email":"&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;","firstName":"Marie","lastName":"Scott"},{"id":2,"email":"&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;","firstName":"Joseph","lastName":"Rodriguez"}, ...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post" title="===== POST:" class="md-nav__link">
    ===== POST:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamejoelastnamecool" title="{"id":101,"firstName":"Joe","lastName":"Cool"}" class="md-nav__link">
    {"id":101,"firstName":"Joe","lastName":"Cool"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-by-id" title="===== GET (by id):" class="md-nav__link">
    ===== GET (by id):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamejoelastnamecool_1" title="{"id":101,"firstName":"Joe","lastName":"Cool"}" class="md-nav__link">
    {"id":101,"firstName":"Joe","lastName":"Cool"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#put" title="===== PUT:" class="md-nav__link">
    ===== PUT:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamenew-namelastnamenew-last-name" title="{"id":101,"firstName":"New Name","lastName":"New Last name"}" class="md-nav__link">
    {"id":101,"firstName":"New Name","lastName":"New Last name"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete" title="===== DELETE:" class="md-nav__link">
    ===== DELETE:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#422-post-validation-error" title="===== 422 - Post Validation Error:" class="md-nav__link">
    ===== 422 - Post Validation Error:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messageproperty-firstname-of-class-class-resttutorialcontact-cannot-be-nullpathcontactindex_linksselfhrefhttplocalhost8080contactindex" title="{"message":"Property [firstName] of class [class resttutorial.Contact] cannot be null","path":"/contact/index","_links":{"self":{"href":"http://localhost:8080/contact/index"}}}" class="md-nav__link">
    {"message":"Property [firstName] of class [class resttutorial.Contact] cannot be null","path":"/contact/index","_links":{"self":{"href":"http://localhost:8080/contact/index"}}}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#404-get-error" title="===== 404 - Get Error:" class="md-nav__link">
    ===== 404 - Get Error:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messagenot-founderror404" title="{"message":"Not Found","error":404}" class="md-nav__link">
    {"message":"Not Found","error":404}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#we-did-not-setup-xml-support-so-we-will-get-a-406-you-may-try-adding-xml-to-formats-to-see-if-this" title="We did not setup XML support so we will get a 406. You may try adding XML to formats to see if this." class="md-nav__link">
    We did not setup XML support so we will get a 406. You may try adding XML to formats to see if this.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testcompile-orggrailsgrails-datastore-rest-client" title="testCompile "org.grails:grails-datastore-rest-client"" class="md-nav__link">
    testCompile "org.grails:grails-datastore-rest-client"
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" title="Glossary" class="md-nav__link">
      Glossary
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-an-api-with-grails-web-services" title="Creating an API with Grails Web Services" class="md-nav__link">
    Creating an API with Grails Web Services
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-a-gorm-domain" title="Creating a GORM domain" class="md-nav__link">
    Creating a GORM domain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-resource-annotation-to-our-domain" title="Adding the @Resource annotation to our domain" class="md-nav__link">
    Adding the @Resource annotation to our domain
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-restfullcontroller" title="The RestfullController" class="md-nav__link">
    The RestfullController
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-endpoints-and-status-codes" title="Default Endpoints and Status Codes" class="md-nav__link">
    Default Endpoints and Status Codes
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#url-mappings" title="Url Mappings" class="md-nav__link">
    Url Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-list" title="===== GET (list):" class="md-nav__link">
    ===== GET (list):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id1emailamp109amp115amp99amp111amp116amp116amp48amp64amp97amp109amp101amp98amp108amp111amp46amp106amp112firstnamemarielastnamescottid2emailamp106amp114amp111amp100amp114amp105amp103amp117amp101amp122amp49amp64amp115amp99amp114amp105amp98amp100amp46amp99amp111amp109firstnamejosephlastnamerodriguez" title="[{"id":1,"email":"&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;","firstName":"Marie","lastName":"Scott"},{"id":2,"email":"&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;","firstName":"Joseph","lastName":"Rodriguez"}, ..." class="md-nav__link">
    [{"id":1,"email":"&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;","firstName":"Marie","lastName":"Scott"},{"id":2,"email":"&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;","firstName":"Joseph","lastName":"Rodriguez"}, ...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#post" title="===== POST:" class="md-nav__link">
    ===== POST:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamejoelastnamecool" title="{"id":101,"firstName":"Joe","lastName":"Cool"}" class="md-nav__link">
    {"id":101,"firstName":"Joe","lastName":"Cool"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-by-id" title="===== GET (by id):" class="md-nav__link">
    ===== GET (by id):
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamejoelastnamecool_1" title="{"id":101,"firstName":"Joe","lastName":"Cool"}" class="md-nav__link">
    {"id":101,"firstName":"Joe","lastName":"Cool"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#put" title="===== PUT:" class="md-nav__link">
    ===== PUT:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#id101firstnamenew-namelastnamenew-last-name" title="{"id":101,"firstName":"New Name","lastName":"New Last name"}" class="md-nav__link">
    {"id":101,"firstName":"New Name","lastName":"New Last name"}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete" title="===== DELETE:" class="md-nav__link">
    ===== DELETE:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#422-post-validation-error" title="===== 422 - Post Validation Error:" class="md-nav__link">
    ===== 422 - Post Validation Error:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messageproperty-firstname-of-class-class-resttutorialcontact-cannot-be-nullpathcontactindex_linksselfhrefhttplocalhost8080contactindex" title="{"message":"Property [firstName] of class [class resttutorial.Contact] cannot be null","path":"/contact/index","_links":{"self":{"href":"http://localhost:8080/contact/index"}}}" class="md-nav__link">
    {"message":"Property [firstName] of class [class resttutorial.Contact] cannot be null","path":"/contact/index","_links":{"self":{"href":"http://localhost:8080/contact/index"}}}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#404-get-error" title="===== 404 - Get Error:" class="md-nav__link">
    ===== 404 - Get Error:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messagenot-founderror404" title="{"message":"Not Found","error":404}" class="md-nav__link">
    {"message":"Not Found","error":404}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#we-did-not-setup-xml-support-so-we-will-get-a-406-you-may-try-adding-xml-to-formats-to-see-if-this" title="We did not setup XML support so we will get a 406. You may try adding XML to formats to see if this." class="md-nav__link">
    We did not setup XML support so we will get a 406. You may try adding XML to formats to see if this.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testcompile-orggrailsgrails-datastore-rest-client" title="testCompile "org.grails:grails-datastore-rest-client"" class="md-nav__link">
    testCompile "org.grails:grails-datastore-rest-client"
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div id="article-content" class="md-content"> 
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/9ci/gorm-rest-api/edit/master/docs/tutorial/stock.md" title="Edit this page" class="md-icon md-content__icon">edit</a>
                
                
                  <h1>Grails OOB(out of the box)</h1>
                
                <h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>For this tutorial you will need</p>
<ul>
<li>
<p>JDK (I advise 8, but you can take 7 as well).</p>
</li>
<li>
<p>Git.</p>
</li>
<li>
<p>Grails 3.2.11 (you can install it with <a href="http://sdkman.io">http://sdkman.io</a> on most Unix based systems.)</p>
</li>
</ul>
<p>After all is installed clone the repo:</p>
<div class="codehilite"><pre><span></span>git clone https://github.com/9ci/angle-grinder
</pre></div>

<p>and switch to branch <code>rest_tutorial</code> branch, and go to <code>angle-grinder/grails/restTutorial</code>, the final result is in
the <code>snapshot</code> folder for each step</p>
<p>So first let's create new grails app:</p>
<div class="codehilite"><pre><span></span>$ grails create-app -profile rest-api -features hibernate4 resttutorail
Application created at angle-grinder/grails/restTutorial
</pre></div>

<p>Grails 3 provides several different profiles you can read about them in the <a href="http://docs.grails.org/3.2.11/guide">grails docs</a></p>
<h2 id="creating-an-api-with-grails-web-services">Creating an API with Grails Web Services<a class="headerlink" href="#creating-an-api-with-grails-web-services" title="Permanent link">&para;</a></h2>
<p>As described in the <a href="http://docs.grails.org/3.2.11/guide/webServices.html">grails ws docs</a>
we will use the default out of the box functionality as a starting point.</p>
<h3 id="creating-a-gorm-domain">Creating a GORM domain<a class="headerlink" href="#creating-a-gorm-domain" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>grails create-domain-class Contact
</pre></div>

<p>Then set it up like so:</p>
<p><strong>Contact.groovy</strong>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="n">resttutorial</span>

<span class="kd">class</span> <span class="nc">Contact</span> <span class="o">{</span>
  <span class="n">String</span> <span class="n">firstName</span>
  <span class="n">String</span> <span class="n">lastName</span>
  <span class="n">String</span> <span class="n">email</span>
  <span class="n">Boolean</span> <span class="n">inactive</span>

  <span class="kd">static</span> <span class="n">constraints</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">firstName</span> <span class="nl">nullable:</span> <span class="kc">false</span>
    <span class="n">inactive</span> <span class="nl">bindable:</span> <span class="kc">false</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
<p>To avoid writing <code>nullable: true</code> we will set the default to allow nulls for fields
Add the following to <code>grails-app/conf/application.groovy</code></p>
<p><strong>application.groovy</strong>
<div class="codehilite"><pre><span></span><span class="n">grails</span><span class="o">.</span><span class="na">gorm</span><span class="o">.</span><span class="na">default</span><span class="o">.</span><span class="na">constraints</span> <span class="o">=</span> <span class="o">{</span>
  <span class="s1">&#39;*&#39;</span> <span class="o">(</span><span class="nl">nullable:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">blank:</span> <span class="kc">true</span><span class="o">)</span>
<span class="o">}</span>
</pre></div></p>
<p>We will load 100 rows of mock test data from a file <code>Contacts.json</code> in resources.
The mock data was generated from a great tool <a href="https://www.mockaroo.com">https://www.mockaroo.com</a></p>
<p>Add the following code to <code>grails-app/init/BootStrap.groovy</code></p>
<p><strong>BootStrap.groovy</strong>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="n">resttutorial</span>

<span class="kn">import</span> <span class="nn">groovy.json.JsonSlurper</span>

<span class="kd">class</span> <span class="nc">BootStrap</span> <span class="o">{</span>
    <span class="kt">def</span> <span class="n">grailsApplication</span>
    <span class="kt">def</span> <span class="n">init</span> <span class="o">=</span> <span class="o">{</span> <span class="n">servletContext</span> <span class="o">-&gt;</span>
        <span class="kt">def</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JsonSlurper</span><span class="o">().</span><span class="na">parse</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s2">&quot;../resources/Contacts.json&quot;</span><span class="o">))</span>
        <span class="n">data</span><span class="o">.</span><span class="na">each</span><span class="o">{</span>
          <span class="n">Contact</span> <span class="n">contact</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Contact</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>
          <span class="n">contact</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="nl">failOnError:</span><span class="kc">true</span><span class="o">,</span><span class="nl">flush:</span> <span class="kc">true</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kt">def</span> <span class="n">destroy</span> <span class="o">=</span> <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
<h4 id="adding-the-resource-annotation-to-our-domain">Adding the <code>@Resource</code> annotation to our domain<a class="headerlink" href="#adding-the-resource-annotation-to-our-domain" title="Permanent link">&para;</a></h4>
<p>:url-dr: {docs-grails}#domainResources</p>
<p>So now we can start working on creating REST Api for our app.
The easiest way is to use {url-dr}[domain resources].
So as we see from {url-dr}[docs] we just need to update our domain a bit (just add {docs-grails-api}/grails/rest/Resource.html[@Resource] anotation) in such a way:</p>
<p><strong>Contact.groovy</strong>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">grails.rest.Resource</span>

<span class="nd">@Resource</span><span class="o">(</span><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;/contact&#39;</span><span class="o">,</span> <span class="n">formats</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;json&quot;</span><span class="o">])</span>
<span class="kd">class</span> <span class="nc">Contact</span> <span class="o">{</span>
  <span class="o">...</span>
<span class="o">}</span>
</pre></div></p>
<blockquote>
<p>:memo <strong>On plural resource names</strong>
As you will notice we did not pluralize it to contacts above as many will do.
We are aware of the debate on this in the rest world. We feel this will cause confusion down the line to do it.</p>
<ol>
<li>English plural rules like "cherry/cherries" or "goose/geese/moose/meese" are not the nicest thing to think of while developing API, particularly when english is not your mother tongue.</li>
<li>Many times, as in Grails, we want to generate endpoint from the model, which is usually singular. It does not play nicely with the above pluralization exceptions and creates more work maintaining UrlMappings.</li>
<li>When the model is singular, which is normally is for us, keeping the rest endpoint singular will have the rest developers and the grails developers speaking the same language</li>
<li>The argument "usually you start querying by a Get to display a list" does not refer to any real use case. And we will end up querying single items as much as and even more than a list of items.</li>
</ol>
</blockquote>
<h5 id="the-restfullcontroller">The <code>RestfullController</code><a class="headerlink" href="#the-restfullcontroller" title="Permanent link">&para;</a></h5>
<p><code>@Resource</code> creates a RestfullController for the domain</p>
<blockquote>
<p><img alt="ðŸ’¡" class="gemoji" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4a1.png" title=":bulb:" /> <strong>The <code>@Resource</code> annotation</strong><br />
is used in an ASTTransformation that creates a controller that extends RestfullController. See <a href="https://github.com/grails/grails-core/blob/master/grails-plugin-rest/src/main/groovy/org/grails/plugins/web/rest/transform/ResourceTransform.groovy">ResourceTransform</a> for details on how it does this. Later we will show how to specify the controller to user with superClass property.</p>
</blockquote>
<h3 id="default-endpoints-and-status-codes">Default Endpoints and Status Codes<a class="headerlink" href="#default-endpoints-and-status-codes" title="Permanent link">&para;</a></h3>
<h4 id="url-mappings">Url Mappings<a class="headerlink" href="#url-mappings" title="Permanent link">&para;</a></h4>
<p>The <a href="http://docs.grails.org/3.2.11/guide/webServices.html#extendingRestfulController">Extending Restful Controllers</a> section of the <a href="http://docs.grails.org/3.2.11/guide">grails docs</a> outlines the action names and the URIs they map to:</p>
<p>.URI, Controller Action and Response Defaults
[cols="2,1,1,3", format="csv", options="header", width="80",grid=rows]
|===
URI, Method, Action, Response Data
/contact , GET , index , Paged List
/contact/create, GET , create , Contact.newInstance() unsaved
/contact, POST , save , The successfully saved contact (same as show's get)
/contact/<span id="id">\({id}, GET , show , The contact for the id
/contact/\)</span>/edit, GET , edit , The contact for the id. same as show
/contact/<span id="id">\({id}, PUT , update , The successfully updated contact
/contact/\)</span>, DELETE , delete , Empty response with HTTP status code 204
|===</p>
<p>==== Status Code Defaults</p>
<p>Piecing together the {docs-HttpStatus}[HttpStatus codes] and results from RestfullController, RestResponder and _errors.gson,
these are what looks like the out of the box status codes as of Grails 3.2.2</p>
<p>.Status Codes Out Of Box
[options="header", cols="1,2", grid=rows]
|===
| Status Code               | Description
| 200 - OK                  | Everything worked as expected. default
| 201 - CREATED             | Resource/instance was created. returned from <code>save</code> action
| 204 - NO_CONTENT          | response code on successful DELETE request
| 404 - NOT_FOUND           | The requested resource doesn't exist.
| 405 - METHOD_NOT_ALLOWED  | If method (GET,POST,etc..) is not setup in <code>static allowedMethods</code> for action or resource is read only
| 406 - NOT_ACCEPTABLE      | Accept header requests a response in an unsupported format. not configed in mime-types. RestResponder uses this
| 422 - UNPROCESSABLE_ENTITY | Validation errors.
|===</p>
<p>=== API Namespace</p>
<p>A Namespace is a mechanism to partition resources into a logically named group.</p>
<p>So the controllers that response for the REST endpoints we will move to separate namespace to avoid cases when we need to
have Controllers for GSP rendering or some other not related to REST stuff.</p>
<p>As a our preferred namespace design we will use the "api" namespace prefix for the rest of the tutorial.
So we will add <code>namespace = 'api'</code> on the contact @Resource. @Resource has also property <code>uri</code> but it will override namespace property,
for example if @Resource(namespace = 'api', uri='contacts', formats = ["json"]) url for resource will be <code>localhost:8080/contacts</code>, not</p>
<p>.Contact.groovy
<div class="codehilite"><pre><span></span><span class="nd">@Resource</span><span class="o">(</span><span class="n">namespace</span> <span class="o">=</span> <span class="s1">&#39;api&#39;</span><span class="o">,</span> <span class="n">formats</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;json&quot;</span><span class="o">])</span>
<span class="kd">class</span> <span class="nc">Contact</span>
</pre></div></p>
<p>Also we need to update UrlMappings.groovy, there are two ways:</p>
<ol>
<li>Add <code>/api</code> prefix to each mapping for example  <code>get &quot;/api/$controller(.$format)?&quot;(action:&quot;index&quot;)</code></li>
<li>Use <code>group</code> property</li>
</ol>
<p>We will use the second case:</p>
<p>.UrlMappings.groovy
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="n">resttutorial</span>

<span class="kd">class</span> <span class="nc">UrlMappings</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="n">mappings</span> <span class="o">=</span> <span class="o">{</span>
      <span class="n">group</span><span class="o">(</span><span class="s2">&quot;/api&quot;</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">delete</span> <span class="s2">&quot;/$controller/$id(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;delete&quot;</span><span class="o">)</span>
        <span class="n">get</span> <span class="s2">&quot;/$controller(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;index&quot;</span><span class="o">)</span>
        <span class="n">get</span> <span class="s2">&quot;/$controller/$id(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;show&quot;</span><span class="o">)</span>
        <span class="n">post</span> <span class="s2">&quot;/$controller(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;save&quot;</span><span class="o">)</span>
        <span class="n">put</span> <span class="s2">&quot;/$controller/$id(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;update&quot;</span><span class="o">)</span>
        <span class="n">patch</span> <span class="s2">&quot;/$controller/$id(.$format)?&quot;</span><span class="o">(</span><span class="nl">action:</span><span class="s2">&quot;patch&quot;</span><span class="o">)</span>
      <span class="o">}</span>
        <span class="o">...</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
<p>You can see all available endpoints that Grails create for us with url-mappings-report:</p>
<hr />
<p>$ grails url-mappings-report
[options="header", cols="1,2", grid=rows]
Dynamic Mappings
 |    *     | ERROR: 500                                | View:   /error           |
 |    *     | ERROR: 404                                | View:   /notFound        |
 |   GET    | /api/<span>\({controller}(.\)</span>{format)?            | Action: index            |
 |   POST   | /api/<span>\({controller}(.\)</span>{format)?            | Action: save             |
 |  DELETE  | /api/<span id="id">\({controller}/\)</span>(.<span controller="controller">\({format)?      | Action: delete           |
 |   GET    | /api/\)</span>/<span>\({id}(.\)</span>{format)?      | Action: show             |
 |   PUT    | /api/<span id="id">\({controller}/\)</span>(.<span controller="controller">\({format)?      | Action: update           |
 |  PATCH   | /api/\)</span>/<span>\({id}(.\)</span>{format)?      | Action: patch            |</p>
<p>Controller: application
 |    *     | /                                                  | Action: index            |</p>
<p>Controller: contact
 |   GET    | /api/contact/create                                | Action: create           |
 |   GET    | /api/contact/<span id="id">\({id}/edit                            | Action: edit             |
 |   POST   | /api/contact                                       | Action: save             |
 |   GET    | /api/contact                                       | Action: index            |
 |  DELETE  | /api/contact/\)</span>                                 | Action: delete           |
 |  PATCH   | /api/contact/<span id="id">\({id}                                 | Action: patch            |
 |   PUT    | /api/contact/\)</span>                                 | Action: update           |
 |   GET    | /api/contact/${id}                                 | Action: show             |</p>
<hr />
<p>=== Using CURL to test CRUD and List</p>
<p>Fire up the app with <code>run-app</code></p>
<h2 id="get-list">===== GET (list):<a class="headerlink" href="#get-list" title="Permanent link">&para;</a></h2>
<p>curl -i -X GET -H "Content-Type: application/json"  localhost:8080/api/contact
HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:30:31 GMT</p>
<h2 id="id1emailamp109amp115amp99amp111amp116amp116amp48amp64amp97amp109amp101amp98amp108amp111amp46amp106amp112firstnamemarielastnamescottid2emailamp106amp114amp111amp100amp114amp105amp103amp117amp101amp122amp49amp64amp115amp99amp114amp105amp98amp100amp46amp99amp111amp109firstnamejosephlastnamerodriguez">[{"id":1,"email":"<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;">&#109;&#115;&#99;&#111;&#116;&#116;&#48;&#64;&#97;&#109;&#101;&#98;&#108;&#111;&#46;&#106;&#112;</a>","firstName":"Marie","lastName":"Scott"},{"id":2,"email":"<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;">&#106;&#114;&#111;&#100;&#114;&#105;&#103;&#117;&#101;&#122;&#49;&#64;&#115;&#99;&#114;&#105;&#98;&#100;&#46;&#99;&#111;&#109;</a>","firstName":"Joseph","lastName":"Rodriguez"}, ...<a class="headerlink" href="#id1emailamp109amp115amp99amp111amp116amp116amp48amp64amp97amp109amp101amp98amp108amp111amp46amp106amp112firstnamemarielastnamescottid2emailamp106amp114amp111amp100amp114amp105amp103amp117amp101amp122amp49amp64amp115amp99amp114amp105amp98amp100amp46amp99amp111amp109firstnamejosephlastnamerodriguez" title="Permanent link">&para;</a></h2>
<h2 id="post">===== POST:<a class="headerlink" href="#post" title="Permanent link">&para;</a></h2>
<p>curl -i -X POST -H "Content-Type: application/json" -d '{"firstName":"Joe", "lastName": "Cool"}' localhost:8080/api/contact
HTTP/1.1 201
X-Application-Context: application:development
Location: <a href="http://localhost:8080/api/contact/101">http://localhost:8080/api/contact/101</a>
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:30:44 GMT</p>
<h2 id="id101firstnamejoelastnamecool">{"id":101,"firstName":"Joe","lastName":"Cool"}<a class="headerlink" href="#id101firstnamejoelastnamecool" title="Permanent link">&para;</a></h2>
<h2 id="get-by-id">===== GET (by id):<a class="headerlink" href="#get-by-id" title="Permanent link">&para;</a></h2>
<p>curl -i -X GET -H "Content-Type: application/json"  localhost:8080/api/contact/101
HTTP/1.1 200
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:31:00 GMT</p>
<h2 id="id101firstnamejoelastnamecool_1">{"id":101,"firstName":"Joe","lastName":"Cool"}<a class="headerlink" href="#id101firstnamejoelastnamecool_1" title="Permanent link">&para;</a></h2>
<h2 id="put">===== PUT:<a class="headerlink" href="#put" title="Permanent link">&para;</a></h2>
<p>curl -i -X PUT -H "Content-Type: application/json" -d '{"firstName": "New Name", "lastName": "New Last name"}' localhost:8080/api/contact/101
HTTP/1.1 200
X-Application-Context: application:development
Location: <a href="http://localhost:8080/api/contact/101">http://localhost:8080/api/contact/101</a>
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:32:01 GMT</p>
<h2 id="id101firstnamenew-namelastnamenew-last-name">{"id":101,"firstName":"New Name","lastName":"New Last name"}<a class="headerlink" href="#id101firstnamenew-namelastnamenew-last-name" title="Permanent link">&para;</a></h2>
<h2 id="delete">===== DELETE:<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h2>
<p>curl -i -X DELETE -H "Content-Type: application/json"  localhost:8080/api/contact/50
HTTP/1.1 204
X-Application-Context: application:development
Date: Mon, 31 Jul 2017 12:32:24 GMT</p>
<hr />
<h2 id="422-post-validation-error">===== 422 - Post Validation Error:<a class="headerlink" href="#422-post-validation-error" title="Permanent link">&para;</a></h2>
<p>curl -i -X POST -H "Content-Type: application/json" -d '{"lastName": "Cool"}' localhost:8080/api/contact
HTTP/1.1 422
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:32:41 GMT</p>
<h2 id="messageproperty-firstname-of-class-class-resttutorialcontact-cannot-be-nullpathcontactindex_linksselfhrefhttplocalhost8080contactindex">{"message":"Property [firstName] of class [class resttutorial.Contact] cannot be null","path":"/contact/index","_links":{"self":{"href":"<a href="http://localhost:8080/contact/index">http://localhost:8080/contact/index</a>"}}}<a class="headerlink" href="#messageproperty-firstname-of-class-class-resttutorialcontact-cannot-be-nullpathcontactindex_linksselfhrefhttplocalhost8080contactindex" title="Permanent link">&para;</a></h2>
<h2 id="404-get-error">===== 404 - Get Error:<a class="headerlink" href="#404-get-error" title="Permanent link">&para;</a></h2>
<p>curl -i -X GET -H "Content-Type: application/json"  localhost:8080/api/contact/105
HTTP/1.1 404
X-Application-Context: application:development
Content-Type: application/json;charset=UTF-8
Content-Language: en-US
Transfer-Encoding: chunked
Date: Mon, 31 Jul 2017 12:32:55 GMT</p>
<h2 id="messagenot-founderror404">{"message":"Not Found","error":404}<a class="headerlink" href="#messagenot-founderror404" title="Permanent link">&para;</a></h2>
<p>===== 406 - NOT_ACCEPTABLE:</p>
<h2 id="we-did-not-setup-xml-support-so-we-will-get-a-406-you-may-try-adding-xml-to-formats-to-see-if-this">We did not setup XML support so we will get a 406. You may try adding XML to formats to see if this.<a class="headerlink" href="#we-did-not-setup-xml-support-so-we-will-get-a-406-you-may-try-adding-xml-to-formats-to-see-if-this" title="Permanent link">&para;</a></h2>
<p>curl -i -X GET -H "Accept: application/xml"  <a href="http://localhost:8080/api/contact/8">http://localhost:8080/api/contact/8</a>
HTTP/1.1 406
X-Application-Context: application:development
Content-Length: 0
Date: Mon, 31 Jul 2017 12:33:13 GMT</p>
<hr />
<p>=== Functional Tests for the API</p>
<p>The next step is to add functional tests for our app. One option is to use Grails functional tests and RestBuilder.
We will cover another javscript option later the angle-grinder section
The line in the buidl.gradle that allows us to use RestBuilder is</p>
<hr />
<h2 id="testcompile-orggrailsgrails-datastore-rest-client">testCompile "org.grails:grails-datastore-rest-client"<a class="headerlink" href="#testcompile-orggrailsgrails-datastore-rest-client" title="Permanent link">&para;</a></h2>
<p>it is added by default when you create a grails app with <code>-profile rest-api</code></p>
<p>==== POST testing example</p>
<p>Here is an example of <code>POST</code> request (creating of a new contact).
RestBuilder we use to emulate request from external source. Note, in Grails3 integration tests run on the random port,
so you cant call <code>http://localhost:8080/api/contact</code> , but we can use <code>serverPort</code> variable instead. And to make it more
intelligent lets use baseUrl. See example:</p>
<p>.ContactSpec.groovy
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="n">resttutorial</span>

<span class="kn">import</span> <span class="nn">grails.plugins.rest.client.RestBuilder</span>
<span class="kn">import</span> <span class="nn">grails.plugins.rest.client.RestResponse</span>
<span class="kn">import</span> <span class="nn">grails.test.mixin.integration.Integration</span>
<span class="kn">import</span> <span class="nn">org.grails.web.json.JSONElement</span>
<span class="kn">import</span> <span class="nn">spock.lang.Shared</span>
<span class="kn">import</span> <span class="nn">spock.lang.Specification</span>

<span class="nd">@Integration</span>
<span class="kd">class</span> <span class="nc">ContactSpec</span> <span class="kd">extends</span> <span class="n">Specification</span> <span class="o">{</span>

    <span class="nd">@Shared</span>
    <span class="n">RestBuilder</span> <span class="n">rest</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RestBuilder</span><span class="o">()</span>

    <span class="kt">def</span> <span class="nf">getBaseUrl</span><span class="o">(){</span><span class="s2">&quot;http://localhost:${serverPort}/api&quot;</span><span class="o">}</span>

    <span class="kt">void</span> <span class="s2">&quot;check POST request&quot;</span><span class="o">()</span> <span class="o">{</span>
        <span class="nl">when:</span>
        <span class="n">RestResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s2">&quot;${baseUrl}/contact&quot;</span><span class="o">){</span>
          <span class="n">json</span><span class="o">([</span>
            <span class="nl">firstName:</span> <span class="s2">&quot;Test contact&quot;</span><span class="o">,</span>
            <span class="nl">email:</span><span class="s2">&quot;foo@bar.com&quot;</span><span class="o">,</span>
            <span class="nl">inactive:</span><span class="kc">true</span> <span class="c1">//is bindable: false - see domain, so it wont be set to contact</span>
          <span class="o">])</span>
        <span class="o">}</span>

        <span class="nl">then:</span>
        <span class="n">response</span><span class="o">.</span><span class="na">status</span> <span class="o">==</span> <span class="mi">201</span>
        <span class="n">JSONElement</span> <span class="n">json</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">json</span>
        <span class="n">json</span><span class="o">.</span><span class="na">id</span> <span class="o">==</span> <span class="mi">101</span>
        <span class="n">json</span><span class="o">.</span><span class="na">firstName</span> <span class="o">==</span> <span class="s2">&quot;Test contact&quot;</span>
        <span class="n">json</span><span class="o">.</span><span class="na">lastName</span> <span class="o">==</span> <span class="kc">null</span>
        <span class="n">json</span><span class="o">.</span><span class="na">email</span> <span class="o">==</span> <span class="s2">&quot;foo@bar.com&quot;</span>
        <span class="n">json</span><span class="o">.</span><span class="na">inactive</span> <span class="o">==</span> <span class="kc">null</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></p>
<p>More tests examples are in the snapshot1 project's
{url-snapshot1}/src/integration-test/groovy/resttutorial/ContactSpec.groovy[ContactSpec.groovy]</p>
<p>=== GSON and Grails Views Defaults</p>
<p>As you can see by inspecting the views directory, by default Grails creates a number of gson files. Support for them is
provided with <a href="http://views.grails.org/latest/#_introduction[Grails">http://views.grails.org/latest/#_introduction[Grails</a> Views Plugin]</p>
<p>The obvious question how does it work. If you look at sources of the RestfullController it doesn't "call" this templates
explicitly. So under the hood plugin just looks on request, if url ends on <code>.json</code>(localhost:8080/api/contact/1.json) or if
<code>Accept</code> header containing <code>application/json</code> the .gson view will be rendered.</p>
<p>If you delete default generated templates, then it will show default Grails page. Go ahead and try to delete <code>notFound.gson</code>
and try</p>
<hr />
<p>curl -i -X GET -H "Content-Type: application/json"  localhost:8080/api/contact/105
HTTP/1.1 404
X-Application-Context: application:development
Content-Type: text/html;charset=utf-8
Content-Language: en-US
Content-Length: 990
Date: Mon, 31 Jul 2017 12:34:06 GMT</p>
<!DOCTYPE html><html><head><title>Apache Tomcat/8.5.5 - Error report</title><style type="text/css">H1 ...
----

<p>===== error.gson
{url-snapshot1}/grails-app/views/error.gson[See source]</p>
<p>This is for internal server errors. As you can see this is where the 500 status code gets set, and error message is specified.</p>
<p>It is called when we get <code>500</code> error, the same as for <code>gsp</code> look at UrlMapping: <code>&quot;500&quot;(view: '/error')</code></p>
<p>===== notFound.gson
{url-snapshot1}/grails-app/views/notFound.gson[See source]
This is for case when resource isn't found. As you can see this is where the 404 status code gets set, and error message is specified.</p>
<p>It is called when we get <code>404</code> error, the same as for <code>gsp</code> look at UrlMapping: <code>&quot;404&quot;(view: '/notFound')</code></p>
<p>===== errors/_errors.gson
{url-snapshot1}/grails-app/views/errors/_errors.gson[See source]
This is for validation errors. As you can see this is where the <code>UNPROCESSABLE_ENTITY</code>(422) status code gets set, and
error messages for entity specified.</p>
<p>It is rendered on {src-grails-rest}/src/main/groovy/grails/rest/RestfulController.groovy#L99[see src]
so if entity has errors it will look for <code>views/contact/_errors.gson</code> and if it doesn't exist then <code>views/errors/_errors.gson</code></p>
<p>You can read more about defaults <a href="http://views.grails.org/latest/#_content_negotiation[here">http://views.grails.org/latest/#_content_negotiation[here</a>]</p>
<p>===== object/_object.gson
{url-snapshot1}/grails-app/views/object/_object.gson[See source]
This is for transforming entity to JSON object.</p>
<p>The rendering of this template is called for example here: {src-grails-rest}/src/main/groovy/grails/rest/RestfulController.groovy#L114[Save method]
So by convention if you have  <code>views/contact/_contact.gson</code> it will render it, in other case <code>views/object/_object.gson</code>,
which just render object as Json, so if we delete it it will still work in the same way because <code>respond instance</code> make
the same.</p>
<p>So all this files are default tempaltes for rendering in JSON all types of the responses and before delete them we need
to implement our own gson templates.</p>
<p>=== Snapshot 1 of this tutorial is at this point</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../swagger-openapi/" title="OpenAPI - Swagger" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                OpenAPI - Swagger
              </span>
            </div>
          </a>
        
        
          <a href="../../glossary/" title="Glossary" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Glossary
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 9ci Inc
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.js"></script>
      
      
      <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
      <script>window.mdc.autoInit()</script>
      <script src="https://cdn.jsdelivr.net/jquery.loadingoverlay/latest/loadingoverlay.min.js"></script>
      <script src="https://r.office.microsoft.com/r/rlidExcelWLJS?v=1&kip=1"></script>
      <script src="../../assets/javascripts/jq-mdc-web.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>